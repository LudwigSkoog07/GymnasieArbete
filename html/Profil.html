<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="../js/theme.js"></script>
  <link rel="stylesheet" href="../css/Global.css" />
  <link rel="stylesheet" href="../css/Profil.css" />
  <title>Profil</title>
  <link rel="icon" type="image/x-icon" href="../img/Eventslogg.png" />
</head>

<body class="page-profil">
  <header class="site-header">
    <div class="container">
      <div class="left">
        <div class="avatar" aria-hidden="true">
          <img src="../img/Eventslogg.png" alt="HöganäsEvents">
        </div>

        <a class="brand" href="../index.html" aria-label="HöganäsEvents hem">
          <span class="brand-name">HöganäsEvents</span>
          <span class="brand-tag">Lokalt • Snabbt • Enkelt</span>
        </a>
      </div>

      <nav id="mobileNav" class="right" aria-label="Huvudnavigering">
        <a href="../index.html" class="icon-btn" title="Hem" aria-label="Hem">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path
              d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1z"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </a>

        <a href="LaddaUp.html" class="icon-btn" title="Ladda upp" aria-label="Ladda upp" data-auth="required">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 3v12" stroke-linecap="round" />
            <path d="M7 8l5-5 5 5" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M4 21h16" stroke-linecap="round" />
          </svg>
        </a>

        <div class="profile-menu">
          <button
            class="icon-btn profile-toggle is-active"
            title="Profil"
            aria-label="Profil"
            aria-haspopup="menu"
            aria-expanded="false"
            type="button"
          >
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M20 21a8 8 0 0 0-16 0" stroke-linecap="round" />
              <circle cx="12" cy="8" r="4" stroke-linecap="round" />
            </svg>
          </button>

          <div class="profile-dropdown" role="menu" aria-label="Profilmeny">
            <a href="Profil.html" class="profile-item" role="menuitem" data-auth="required">Profil</a>
            <a href="Installningar.html" class="profile-item" role="menuitem" data-auth="required">Inställningar</a>
          </div>
        </div>
      </nav>

      <div class="header-actions">
        <a
          id="authCta"
          class="auth-cta"
          href="Auth.html"
          aria-label="Logga in eller skapa konto"
          data-hide-when-authed="true"
        >
          <span class="cta-long">Logga in / Skapa konto</span>
          <span class="cta-short">Logga in</span>
        </a>

        <button
          class="menu-toggle"
          aria-label="Öppna/stäng navigationsmeny"
          aria-expanded="false"
          aria-controls="mobileNav"
          type="button"
        >
          <span class="hamburger"></span>
        </button>
      </div>
    </div>
  </header>

  <main class="profil-main">
    <section class="profil-card" aria-label="Profil">
      <div class="profil-top">
        <div class="profil-user">
          <div class="profil-avatar" aria-hidden="true">
            <img id="avatarImg" alt="Profilbild" style="display:none;" />
            <span class="avatar-fallback" id="avatarFallback">??</span>
          </div>

          <div class="profil-info">
            <div class="name-row">
              <h1 class="profil-name" id="profileName">Laddar...</h1>
              <span id="profileBadge" class="user-badge profile-name-badge" hidden></span>

              <button id="editNameBtn" class="icon-pill" type="button"
                aria-label="Redigera användarnamn" title="Redigera">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 20h9" stroke-linecap="round"/>
                  <path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"
                    stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>

            <div id="nameEditor" class="name-editor" hidden>
              <input id="nameInput" class="name-input" type="text" maxlength="22"
                autocomplete="off" spellcheck="false" disabled />
              <div class="name-actions">
                <button id="saveNameBtn" class="mini-btn primary" type="button">Spara</button>
                <button id="cancelNameBtn" class="mini-btn" type="button">Avbryt</button>
              </div>
              <div id="nameHint" class="name-hint">3–22 tecken. Bokstäver/nr/._-</div>
            </div>

            <p class="profil-meta" id="profileMeta">0 publicerade händelser</p>

            <div class="profil-controls">
              <label class="upload-pill" for="avatarInput">
                <span class="upload-title">Profilbild</span>
                <span class="upload-sub">Välj fil</span>
              </label>
              <input id="avatarInput" class="upload-hidden" type="file"
                accept="image/png,image/jpeg,image/webp" />

              <button id="logoutBtn" class="profil-btn ghost" type="button">Logga ut</button>
            </div>
          </div>
        </div>

        <a class="profil-btn" href="LaddaUp.html" aria-label="Ladda upp en händelse">
          + Ladda upp
        </a>
      </div>

      <div class="profil-about">
        <p class="profil-label">Om mig</p>
        <textarea
          id="aboutMe"
          class="profil-box"
          rows="4"
          placeholder="Skriv något om dig själv..."
        ></textarea>
      </div>
    </section>

    <h2 class="profil-section-title">Mina händelser</h2>

    <div class="my-events" id="myEvents" aria-label="Mina upplagda händelser"></div>

    <p id="myEmpty" class="my-empty" style="display:none;">
      Inga händelser ännu.
    </p>
  </main>

  <script src="../js/Main.js"></script>
  <script type="module" src="../js/headerAuth.js"></script>
  <script type="module" src="../js/profil.js"></script>
</body>
</html>
